dynvariables:
  samba-common-args: "eval echo uid=$(id -nu $USER),gid=$(id -ng $USER),file_mode=0640,dir_mode=0750,cache=strict,iocharset=utf8,forcegid,mapposix,nounix"
  samba-credentials: "eval echo credentials=~/Public/.config"
  temp-dir: "mktemp -d /tmp/dotfiles-XXXXXXXXX.d"
actions:
  samba-mkdir: cat ~/Public/.config.d/*.fstab |tr -s ' ' |cut -d' ' -f2 |sort |uniq |xargs -I@ bash -c 'mkdir -p $(eval echo @)'
config:
  backup: true
  banner: true
  create: true
  dotpath: secret_plain
  ignoreempty: false
  keepdot: false
  longkey: false
  showdiff: false
  workdir: ~/dotfiles
  import_variables:
    - variables.yaml:optional
dotfiles:
  d_git:
    dst: ~/.config/git/
    src: git/{{@@ profile @@}}/
  d_samba:
    dst: ~/Public/
    src: samba/{{@@ profile @@}}/
    actions:
      - samba-mkdir
  d_ssh:
    dst: ~/.ssh/
    src: ssh/{{@@ profile @@}}/
  d_systemd-tmpfiles:
    dst: ~/.config/user-tmpfiles.d/
    src: systemd-tmpfiles/{{@@ profile @@}}/
profiles:
  khronos3d:
    dotfiles:
    - ALL
