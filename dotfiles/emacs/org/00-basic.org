* åŸºç¡€é…ç½®

åˆ›å»ºè¯æ³•ç»‘å®šå¯ä»¥ (ç¨å¾®) åŠ é€Ÿé…ç½®æ–‡ä»¶çš„è¿è¡Œã€‚ (æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹ [[https://nullprogram.com/blog/2016/12/22/][è¿™ç¯‡åšå®¢]])

#+begin_src emacs-lisp :comments no
;;; config.el -*- lexical-binding: t; -*-
#+end_src

#+begin_src shell :exports none :comments no :tangle-mode (identity #o755) :tangle no
#!/usr/bin/env bash
source /etc/os-release
#+end_src

é…ç½®æœ‰ç”¨ä¸”åŸºç¡€çš„ä¸ªäººä¿¡æ¯
#+begin_src emacs-lisp
(setq user-full-name "GinShio"
      user-mail-address "ginshio78@gmail.com"
      org-directory "~/cyberlive"
      )
#+end_src
æ˜¾ç„¶è¿™å¯ä»¥è¢« GPG æˆ–å…¶ä»–ç¨‹åºä½¿ç”¨ã€‚

** è®¾ç½®é»˜è®¤å€¼

å°è¯•ä¸€ä¸‹åˆ«äººçš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚ [[https://github.com/angrybacon/dotemacs/blob/master/dotemacs.org#use-better-defaults][angrybacon/dotemacs]]
#+begin_src emacs-lisp
(setq-default
 delete-by-moving-to-trash t        ; å°†æ–‡ä»¶åˆ é™¤åˆ°å›æ”¶ç«™
 window-combination-resize t        ; ä»å…¶ä»–çª—å£è·å–æ–°çª—å£çš„å¤§å°
 x-stretch-cursor t                 ; å°†å…‰æ ‡æ‹‰ä¼¸åˆ°å­—å½¢å®½åº¦
 )

(setq! undo-limit 104857600         ; é‡ç½®æ’¤é”€é™åˆ¶åˆ° 100 MiB
       auto-save-default t          ; æ²¡æœ‰äººå–œæ¬¢ä¸¢å¤±å·¥ä½œï¼Œæˆ‘ä¹Ÿæ˜¯å¦‚æ­¤
       truncate-string-ellipsis "â€¦" ; Unicode çœç•¥å·ç›¸æ¯” ascii æ›´å¥½
                                    ; åŒæ—¶èŠ‚çœ /å®è´µçš„/ ç©ºé—´
       password-cache-expiry nil    ; æˆ‘èƒ½ä¿¡ä»»æˆ‘çš„ç”µè„‘ ... æˆ–ä¸èƒ½?
       ; scroll-preserve-screen-position 'always
                                    ; ä¸è¦è®© `ç‚¹' (å…‰æ ‡) è·³æ¥è·³å»
       scroll-margin 2              ; é€‚å½“ä¿æŒä¸€ç‚¹ç‚¹è¾¹è·
       gc-cons-threshold 1073741824
       read-process-output-max 1048576
       which-func-unknown ""
       auth-sources `(,(expand-file-name "git/.authinfo" (getenv "XDG_CONFIG_HOME"))
                      ,(expand-file-name "git/.authinfo-khronos3d" (getenv "XDG_CONFIG_HOME")))
       )

(remove-hook! text-mode #'visual-line-mode)
(add-hook! text-mode #'auto-fill-mode)
(add-hook! window-setup #'toggle-frame-maximized)
                                    ; è®¾ç½®æœ€å¤§åŒ–å¯åŠ¨
(global-subword-mode 1)             ; è¯†åˆ«é©¼å³°ï¼Œè€Œä¸æ˜¯å‚»ç“œå‰è¿›
(global-unset-key (kbd "C-z"))      ; å…³é—­ "C-z" æœ€å°åŒ–
(global-unset-key (kbd "C-s"))      ; å…³é—­ "C-s" æœç´¢åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ç”± "C-c s s" æ›¿ä»£

(when IS-WINDOWS
  (setq-default buffer-file-coding-system 'utf-8-unix)
  (set-default-coding-systems 'utf-8-unix)
  (prefer-coding-system 'utf-8-unix))
                                    ; å°† Windows ä¸Šçš„ç¼–ç æ”¹ä¸º UTF-8 Unix æ¢è¡Œ

(custom-set-variables '(delete-selection-mode t) ;; delete when you select region and modify
                      '(delete-by-moving-to-trash t) ;; delete && move to transh
                      '(inhibit-compacting-font-caches t) ;; donâ€™t compact font caches during GC.
                      '(gc-cons-percentage 1))

(add-hook! prog-mode (lambda () (setq show-trailing-whitespace 1)))
                                    ; ç¼–ç¨‹æ¨¡å¼ä¸‹è®©ç»“å°¾çš„ç©ºç™½ç¬¦äº®èµ·
(add-hook! prog-mode #'which-function-mode)
#+end_src

å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ key leaderï¼Œæˆ–è®¸æ²¡ä»€ä¹ˆç”¨
#+begin_src emacs-lisp
(after! general
  (general-create-definer ginshio/leader :prefix "s-y"))
#+end_src

é»˜è®¤æƒ…å†µä¸‹é€šè¿‡è‡ªå®šä¹‰ç•Œé¢æ‰€åšçš„ä¿®æ”¹ä¼šè¢«æ·»åŠ åˆ° =init.el= ä¸­ã€‚
ä¸è¿‡æ­£å¸¸çš„æ–¹æ³•æ˜¯å°†å®ƒä»¬æ”¾åœ¨ =.custom.el= ä¸­ã€‚
#+begin_src emacs-lisp
(setq-default custom-file (expand-file-name ".custom.el" doom-user-dir))
(when (file-exists-p custom-file) (load custom-file))
#+end_src

** Doom é…ç½®

æ‹‰å– doom-emacs ä»“åº“çš„åˆ†æ”¯
  - emacs-version: *29.1*
  - git commit: *03d692f*

*** æ¨¡ç»„
:properties:
:header-args:emacs-lisp: :tangle no
:end:

#+name: init.el
#+attr_html: :collapsed t
#+begin_src emacs-lisp :tangle "init.el" :noweb no-export :comments no
;;; init.el -*- lexical-binding: t; -*-

;; This file controls what Doom modules are enabled and what order they load
;; in. Remember to run 'doom sync' after modifying it!

;; NOTE Press 'SPC h d h' (or 'C-h d h' for non-vim users) to access Doom's
;;      documentation. There you'll find a link to Doom's Module Index where all
;;      of our modules are listed, including what flags they support.

;; NOTE Move your cursor over a module's name (or its flags) and press 'K' (or
;;      'C-c c k' for non-vim users) to view its documentation. This works on
;;      flags as well (those symbols that start with a plus).
;;
;;      Alternatively, press 'gd' (or 'C-c c d') on a module to browse its
;;      directory (for easy access to its source code).

(doom! :input
       <<doom-input>>

       :completion
       <<doom-completion>>

       :ui
       <<doom-ui>>

       :editor
       <<doom-editor>>

       :emacs
       <<doom-emacs>>

       :term
       <<doom-term>>

       :checkers
       <<doom-checkers>>

       :tools
       <<doom-tools>>

       :os
       <<doom-os>>

       :lang
       <<doom-lang>>

       :email
       <<doom-email>>

       :app
       <<doom-app>>

       :config
       <<doom-config>>
       )
#+end_src

**** ç»“æ„

è¿™æ˜¯ä¸€ç¯‡æ–‡å­¦ç¼–ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Doom Emacs çš„é…ç½®æ–‡ä»¶ã€‚Doom å¯¹å…¶æ”¯æŒè‰¯å¥½ï¼Œæ›´å¤šè¯¦æƒ…
å¯ä»¥é€šè¿‡ ~literate~ (æ–‡å­¦) æ¨¡å—äº†è§£ã€‚

#+name: doom-config
#+begin_src emacs-lisp
; literate
(default +bindings +smartparens)
#+end_src

**** æ¥å£

å¯ä»¥åšå¾ˆå¤šäº‹æ¥å¢å¼º Emacs çš„åŠŸèƒ½ï¼Œã€‚

- è¾“å…¥ ::
  ä¸­æ—¥æ–‡è¾“å…¥ä¸é”®ç›˜å¸ƒå±€
  #+name: doom-input
  #+begin_src emacs-lisp
;;bidi              ; (tfel ot) thgir etirw uoy gnipleh
;;chinese
;;japanese
;;layout            ; auie,ctsrnm is the superior home row
  #+end_src

- è¡¥å…¨ ::
  æˆ–è®¸å«è¡¥å…¨æœ‰ç‚¹ä¸åˆé€‚ï¼Œä¸è¿‡ä¹Ÿå°±è¿™æ ·äº†ã€‚å¦å¤–è¯´ä¸€ä¸‹ï¼Œ ~helm~ ã€ ~ido~ ã€ ~ivy~ ä»¥
  åŠ ~vertico~ æ˜¯åŠŸèƒ½ä¸€è‡´çš„ï¼Œç”Ÿæ€ä¸åŒçš„å››ä¸ªåŒ…ã€‚
  #+name: doom-completion
  #+begin_src emacs-lisp
;;(company          ; the ultimate code completion backend
;; +childframe)
(corfu              ; complete with cap(f), cape and a flying feather!
 +icons
 +orderless)
;;helm              ; the *other* search engine for love and life
;;ido               ; the other *other* search engine...
;;(ivy              ; a search engine for love and life
;; +icons           ; ... icons are nice
;; +prescient)      ; ... I know what I want(ed)
(vertico +icons)    ; the search engine of the future
  #+end_src

- UI :: å¥½ä¸å¥½çœ‹å°±çœ‹ä½ è¿™ä¹ˆé…ç½®äº†
  #+name: doom-ui
  #+begin_src emacs-lisp
;;deft              ; notational velocity for Emacs
doom                ; what makes DOOM look the way it does
doom-dashboard      ; a nifty splash screen for Emacs
;;doom-quit         ; DOOM quit-message prompts when you quit Emacs
;;(emoji
;; +unicode +github); ğŸ™‚
hl-todo             ; highlight TODO/FIXME/NOTE/DEPRECATED/HACK/REVIEW
;;indent-guides     ; highlighted indent columns
;;(ligatures +extra); ligatures and symbols to make your code pretty again
;;minimap           ; show a map of the code on the side
modeline            ; snazzy, Atom-inspired modeline, plus API
;;nav-flash         ; blink cursor line after big motions
;;neotree           ; a project drawer, like NERDTree for vim
ophints             ; highlight the region an operation acts on
;;(popup            ; tame sudden yet inevitable temporary windows
;; +all             ; catch all popups that start with an asterix
;; +defaults)       ; default popup rules
;;tabs              ; a tab bar for Emacs
;;treemacs          ; a project drawer, like neotree but cooler
;;unicode           ; extended unicode support for various languages
(vc-gutter +pretty) ; vcs diff in the fringe
vi-tilde-fringe     ; fringe tildes to mark beyond EOB
(window-select      ; visually switch windows
 +numbers)          ; Enable numbered windows and window selection
workspaces          ; tab emulation, persistence & separate workspaces
;; zen              ; distraction-free coding or writing
  #+end_src

- ç¼–è¾‘å™¨ :: *VI VI VI Editor of the Beast*
  #+name: doom-editor
  #+begin_src emacs-lisp
;;(evil +everywhere); come to the dark side, we have cookies
file-templates      ; auto-snippets for empty files
fold                ; (nigh) universal code folding
format              ; automated prettiness
;;god               ; run Emacs commands without modifier keys
;;lispy             ; vim for lisp, for people who don't like vim
multiple-cursors    ; editing in many places at once
;;objed             ; text object editing for the innocent
;;parinfer          ; turn lisp into python, sort of
;;rotate-text       ; cycle region at point between text candidates
snippets            ; my elves. They type so I don't have to
;;word-wrap         ; soft wrapping with language-aware indent
  #+end_src

- Emacs :: å¢å¼ºä¸€ä¸‹å§ï¼Œä¸ç„¶çœŸçš„æ˜¯ç¬”è®°æœ¬äº† (å…¶å®ä¸æ˜¯
  #+name: doom-emacs
  #+begin_src emacs-lisp
(dired              ; making dired pretty [functional]
 +icons)
electric            ; smarter, keyword-based electric-indent
;;eww               ; the internet is gross
(ibuffer +icons)    ; interactive buffer management
undo                ; persistent, smarter undo for your inevitable mistakes
vc                  ; version-control and Emacs, sitting in a tree
  #+end_src

- ç»ˆç«¯ :: ä¹Ÿè®¸æˆ‘åº”è¯¥å¸è½½æ‰æˆ‘çš„ =Konsole=
  #+name: doom-term
  #+begin_src emacs-lisp
;;eshell            ; the elisp shell that works everywhere
;;shell             ; simple shell REPL for Emacs
;;term              ; basic terminal emulator for Emacs
vterm               ; the best terminal emulation in Emacs
  #+end_src

- æ£€æµ‹ :: å¯ä»¥å‘Šè¯‰æˆ‘å“ªé‡Œä¸å¯¹ï¼Œä½†æˆ‘è§‰å¾—æˆ‘åº”è¯¥å…ˆå¥½å¥½èƒŒèƒŒå•è¯æˆ–è€…çœ‹çœ‹ PEP8
  #+name: doom-checkers
  #+begin_src emacs-lisp
syntax              ; tasing you for every semicolon you forget
;;(spell +flyspell) ; tasing you for misspelling mispelling
;;grammar           ; tasing grammar mistake every you make
  #+end_src

- å·¥å…· :: Workflow in Emacs!
  #+name: doom-tools
  #+begin_src emacs-lisp
;;ansible
biblio              ; Writes a PhD for you (citation needed)
;;collab            ; buffers with friends
;;(debugger +lsp)   ; stepping through code, to help you add bugs (use dape instead)
;;direnv
;;docker
editorconfig        ; let someone else argue about tabs vs spaces
;;ein               ; tame Jupyter notebooks with emacs
(eval +overlay)     ; run code, run (also, repls)
;;llm               ; when I said you needed friends, I didn't mean...
lookup              ; helps you navigate your code and documentation
(lsp +eglot)        ; M-x vscode
(magit              ; a git porcelain for Emacs
 +forge)            ; interface with git forges
make                ; run make tasks from Emacs
;;pass              ; password manager for nerds
;;pdf               ; pdf enhancements
;;terraform         ; infrastructure as code
;;tmux              ; an API for interacting with tmux
tree-sitter         ; syntax and parsing, sitting in a tree...
;;upload            ; map local to remote projects via ssh/ftp
  #+end_src

- OS :: æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä¼šç”¨ MAC å—
  #+name: doom-os
  #+begin_src emacs-lisp
(:if (featurep :system 'macos) macos)  ; improve compatibility with macOS
tty                 ; improve the terminal Emacs experience
  #+end_src

**** ç¼–ç¨‹è¯­è¨€æ”¯æŒ

æœ€çˆ½çš„äº‹æƒ…å°±æ˜¯ï¼Œæˆ‘å¯ä»¥åœ¨ Emacs ä¸­ç¼–å†™ä»»ä½•è¯­è¨€ (çš„ ~Hello World~)

#+name: doom-lang
#+begin_src emacs-lisp
;;agda                ; types of types of types of types...
;;beancount           ; mind the GAAP
(cc                   ; C > C++ == 1
 +lsp                 ; smart C but still memory leak
 +tree-sitter)
;;clojure             ; java with a lisp
;;common-lisp         ; if you've seen one lisp, you've seen them all
;;coq                 ; proofs-as-programs
;;crystal             ; ruby at the speed of c
;;csharp              ; unity, .NET, and mono shenanigans
data                  ; config/data formats
;;(dart +flutter)     ; paint ui and not much else
;;dhall
;;elixir              ; erlang done right
;;elm                 ; care for a cup of TEA?
emacs-lisp            ; drown in parentheses
;;erlang              ; an elegant language for a more civilized age
;;ess                 ; emacs speaks statistics
;;factor
;;faust               ; dsp, but you get to keep your soul
;;fortran             ; in FORTRAN, GOD is REAL (unless declared INTEGER)
;;fsharp              ; ML stands for Microsoft's Language
;;fstar               ; (dependent) types and (monadic) effects and Z3
;;gdscript            ; the language you waited for
;;(go +lsp)           ; the hipster dialect
;;(graphql +lsp)      ; Give queries a REST
;;(haskell +lsp)      ; a language that's lazier than I am
;;hy                  ; readability of scheme w/ speed of python
;;idris               ; a language you can depend on
;;json                ; At least it ain't XML
;;janet               ; Fun fact: Janet is me!
;;(java +lsp)         ; the poster child for carpal tunnel syndrome
;;(javascript +lsp)   ; all(hope(abandon(ye(who(enter(here))))))
;;julia               ; a better, faster MATLAB
;;kotlin              ; a better, slicker Java(Script)
(latex                ; writing papers in Emacs has never been so fun
 +cdlatex             ; quick maths symbols
 +fold)               ; fold the clutter away nicities
;;lean                ; for folks with too much to prove
;;ledger              ; be audit you can be
;;lua                 ; one-based indices? one-based indices
markdown              ; writing docs for people to ignore
;;nim                 ; python + lisp at the speed of c
;;nix                 ; I hereby declare "nix geht mehr!"
;;ocaml               ; an objective camel
(org                  ; organize your plain life in plain text
 +crypt               ;
 +dragndrop           ; drag & drop files/images into org buffers
 +hugo                ; use Emacs for hugo blogging
 +pandoc)             ; export-with-pandoc support
;;php                 ; perl's insecure younger brother
;;plantuml            ; diagrams for confusing people more
;;purescript          ; javascript, but functional
(python               ; beautiful is better than ugly
 +cython
 +lsp
 +pyenv
 +pyright
 +tree-sitter)
;;qt                  ; the 'cutest' gui framework ever
;;racket              ; a DSL for DSLs
;;raku                ; the artist formerly known as perl6
;;rest                ; Emacs as a REST client
;;rst                 ; ReST in peace
;;(ruby +tree-sitter) ; 1.step {|i| p "Ruby is #{i.even? ? 'love' : 'life'}"}
(rust                 ; Fe2O3.unwrap().unwrap().unwrap().unwrap()
 +lsp
 +tree-sitter)
;;scala               ; java, but good
(scheme +guile)       ; a fully conniving family of lisps
sh                    ; she sells {ba,z,fi}sh shells on the C xor
;;sml
;;solidity            ; do you need a blockchain? No.
;;swift               ; who asked for emoji variables?
;;terra               ; Earth and Moon in alignment for performance.
;;web                 ; the tubes
;;yaml                ; JSON, but readable
(zig                ; C, but simpler
 +lsp
 +tree-sitter)
#+end_src

**** Everything in Emacs

*leave* Emacs

- é‚®ä»¶ :: è¯´å®è¯ï¼Œæˆ‘æƒ³ç”¨ =Thunderbird=
  #+name: doom-email
  #+begin_src emacs-lisp
;;(mu4e +org +gmail)
;;notmuch
;;(wanderlust +gmail)
  #+end_src

- åº”ç”¨ :: å¯ä»¥åœ¨ Emacs ä¸­ä¸Šç½‘çœ‹æ–°é—»ã€‚æˆ–è®¸æˆ‘å¯ä»¥ç”¨ irc èŠå¤©
  #+name: doom-app
  #+begin_src emacs-lisp
;;calendar
;;emms
;;everywhere        ; *leave* Emacs!? You must be joking
;;irc               ; how neckbeards socialize
;;(rss +org)        ; emacs as an RSS reader
  #+end_src

*** è§†è§‰è®¾ç½®

**** å­—ä½“è®¾ç½®

'Source Code Pro' å’Œ 'Fira Code' çš„æ•ˆæœéƒ½å¾ˆä¸é”™ï¼Œ'JetBrains Mono' å’Œ 'IBM Plex Mono'
æˆ–è®¸ä¹Ÿä¸é”™ã€‚è¿˜æ˜¯æ¯”è¾ƒæ¨è Mono å­—ä½“ï¼Œç­‰å®½çœ‹ä»£ç èˆ’æœã€‚


Unicode å­—ä½“ä¸ºä»€ä¹ˆä¸è¯•è¯• 'JuliaMono' å‘¢ï¼Ÿ

#+begin_src emacs-lisp
(setq doom-font (font-spec :family "Source Code Pro" :size 15)
      doom-big-font (font-spec :family "Source Code Pro" :size 30)
      doom-variable-pitch-font (font-spec :family "SourceCodeVF" :size 15)
      doom-unicode-font (font-spec :family "JuliaMono")
      doom-serif-font (font-spec :family "Source Serif 4")
      )
#+end_src

ä¸è¿‡è¿™éƒ½æ˜¯è¥¿æ–‡å­—ä½“ï¼Œæ²¡æœ‰è€ƒè™‘è¿‡ CJK ç”¨æˆ·çš„æ„Ÿå—å—ï¼ï¼åœ¨åé¢çš„
[[æ‚é¡¹][æ‚é¡¹]] ä¸­ï¼Œå°†è¯¦ç»†è¯´ä¸€ä¸‹ CJK å­—ä½“çš„é…ç½®ã€‚

é™¤äº†è¿™äº›å­—ä½“å¤–ï¼Œå­—ä½“ [[https://github.com/SorkinType/Merriweather/][Merriweather]] è¿˜è¢«ç”¨äº =nov.el= ä¸­ï¼Œå­—ä½“ [[https://github.com/huertatipografica/Alegreya][Alegreya]] ä½œä¸ºè¡¬çº¿æ¯”
ä¾‹å­—ä½“è¢«ç”¨äº Org æ–‡ä»¶çš„ =writeroom-mode= ä¸­çš„ =mixed-pitch-mode=â€‹ã€‚

**** ä¸»é¢˜å’Œ modeline

~doom-one~ æ˜¯ Doom è‡ªå¸¦çš„å¤§è€Œå…¨çš„ä¸»é¢˜ï¼Œé‡Œé¢å®åœ¨å¤ªå¤šå¥½çœ‹çš„ä¸»é¢˜äº†ï¼Œå¹²å˜›è¿˜è¦è‡ªå·±æ‰¾ã€‚
è¿™é‡Œæˆ‘æƒ³åœ¨ä¼—å¤šæˆ‘å–œæ¬¢çš„ä¸»é¢˜ä¸­ï¼Œå¯åŠ¨æ—¶éšæœºé€‰å–ä¸€æ¬¾ã€‚

#+begin_src emacs-lisp :tangle no
(setq doom-theme (let ((themes '(doom-vibrant
                                 doom-fairy-floss
                                 doom-dracula
                                 doom-Iosvkem
                                 doom-moonlight
                                 doom-monokai-pro
                                 doom-tokyo-night)))
                   (elt themes (random (length themes)))))
#+end_src

å½“ç„¶ä½ ä¸å–œæ¬¢è¿™æ ·ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šä¸€æ¬¾ã€‚å¦å¤–ï¼Œä½ å¯ä»¥é‡‡ç”¨å¿«æ·é”® =C-h t= æ¥é¢„è§ˆå¹¶é€‰æ‹©
å„ä¸ªä¸»é¢˜ï¼ˆå½“ç„¶æ˜¯ä¸€æ¬¡æ€§çš„ï¼‰ã€‚
#+begin_src emacs-lisp :tangle no
(setq doom-theme 'doom-vibrant)
#+end_src

Timothy æœ‰ä¸€ä¸ªç›¸å½“æœ‰è¶£çš„åšæ³•ï¼Œæ ¹æ®ç³»ç»Ÿä¸»é¢˜é€‰æ‹©å¯¹åº”çš„ä¸»é¢˜ã€‚å½“ç„¶ï¼Œä»ç¯å¢ƒå˜é‡ =DOOM_THEME= ä¸­å»è¯»ä¹Ÿæ˜¯ç›¸å½“æ£’çš„ã€‚

è®¾ç½®ä¸€ä¸‹ modelineï¼Œæ¯”å¦‚è¯´å›¾æ ‡ã€æ–‡ä»¶åç§°ä»¥åŠå½©è™¹çŒ« (Nyan cat)ï¼
#+begin_src emacs-lisp
(after! doom-modeline
  (custom-set-variables '(doom-modeline-buffer-file-name-style 'relative-to-project)
                        '(doom-modeline-major-mode-icon t)
                        '(doom-modeline-modal-icon nil))
  (nyan-mode t))
#+end_src

**** æ‚é¡¹

ç›¸å¯¹è¡Œå·å¯ä»¥å¾ˆå¥½çš„çŸ¥é“è·ç¦»ç›®æ ‡è¡Œæœ‰å¤šè¿œï¼Œç„¶åç”¨å¿«æ·é”® =C-u num <UP>= æˆ–
=ESC num <UP>= åˆ°è¾¾ä½ æƒ³å»çš„è¡Œã€‚
#+begin_src emacs-lisp
(setq display-line-numbers-type 'relative)
#+end_src

æˆ‘æƒ³è®¾ç½®ä¸€ä¸‹æ›´å¥½çœ‹çš„é»˜è®¤ç¼“å†²åŒºåç§°
#+begin_src emacs-lisp
(setq doom-fallback-buffer-name "â–º Doom"
      +doom-dashboard-name "â–º Doom")
#+end_src

å†æ¥è¯´è¯´åˆå§‹åŒ– doom æ—¶ï¼ŒUI ä¸Šå…¶å®è¿˜æœ‰å¾ˆå¤šèƒ½åšçš„ï¼Œæ¯”å¦‚è¯´å…³é—­ä¸‘çš„ä¸è¡Œçš„ ~menu-bar~â€‹ï¼Œ
è®¾ç½®å…‰æ ‡æ¨¡å¼ï¼Œä»¥åŠ CJK å­—ä½“ç­‰ã€‚

éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå­—ä½“åœ¨ GUI ä¸‹æ˜¯æœ‰æ•ˆçš„ï¼ŒTUI ä¸‹ä½¿ç”¨çš„åº”è¯¥æ˜¯ç»ˆç«¯è®¾ç½®ã€‚å¦å¤–ï¼Œä½¿ç”¨ mono
å­—ä½“æ—¶ï¼ŒCJK ä¸€èˆ¬æ˜¯è¥¿æ–‡å­—å·çš„ =1.2= å€ï¼Œè¿™æ ·ä¸€ä¸ª CJK ç¬¦å·å°†æ˜¯è¥¿æ–‡ç¬¦å·çš„ =2= å€ã€‚
æ¯”è¾ƒå»ºè®®è¥¿æ–‡å­—ä½“è®¾ç½®ä¸º =5= çš„å€æ•°ï¼Œè¿™æ ·å¾—åˆ°çš„ CJK å­—ç¬¦éƒ½èƒ½æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚

#+begin_src emacs-lisp :tangle yes :noweb no-export :comments no
(defun ginshio/doom-init-ui-misc()
  (menu-bar-mode -1)               ;; disable menu-bar
  (tab-bar-mode -1)                ;; disable tab-bar
  (setq-default cursor-type 'box)  ;; set box style cursor
  (blink-cursor-mode -1)           ;; cursor not blink
  <<doom-dashboard-layout>>
  (if (display-graphic-p)
      (progn
        ;; NOTE: ONLY GUI
        ;; set font
        (dolist (charset '(kana han bopomofo))
          (set-fontset-font (frame-parameter nil 'font) charset
                            (font-spec :family "Source Han Mono SC")))
        (appendq! face-font-rescale-alist
                  '(("Source Han Mono SC" . 1.2)))
        <<doom-image-banner>>
        ;; random banner image from bing.com, NOTE: https://emacs-china.org/t/topic/264/33
        )
    (progn
      ;; NOTE: ONLY TUI
      <<doom-ascii-banner>>
      )))
(add-hook! doom-init-ui #'ginshio/doom-init-ui-misc)
#+end_src

*** è¾…åŠ©å®
è¿™äº›æ˜¯ doom æ·»åŠ çš„ä¸€äº›éå¸¸æœ‰ç”¨çš„å®
- ~load!~ å¯ä»¥ç›¸å¯¹äºæœ¬æ–‡ä»¶è¿›è¡Œå¤–éƒ¨ ~.el~ æ–‡ä»¶çš„åŠ è½½
- ~use-package!~ ç”¨äºé…ç½®åŒ…
- ~add-load-path!~ å°†æŒ‡å®šç›®å½•æ·»åŠ åˆ° ~load-path~ ä¸­ï¼Œå¯ä»¥è®© Emacs åœ¨ä½¿ç”¨
  ~require~ å’Œ ~use-package~ æ—¶åœ¨ ~load-path~ ä¸­è¿›è¡ŒæŸ¥æ‰¾
- ~map!~ ç”¨äºç»‘å®šæ–°çš„å¿«æ·é”®

*** å…è®¸ CLI è¿è¡Œ org-babel ç¨‹åº

åœ¨ Org ä¸­æœ‰æ—¶ä¼šå†™ä¸€ç‚¹ä»£ç ï¼Œ[[https://orgmode.org/worg/org-contrib/babel][Org-Babel]] å°±æ˜¯å„ä¸ªè¯­è¨€åœ¨ Org-mode ä¸­çš„å·´åˆ«å¡”ã€‚å¤§å®¶éƒ½
å¯ä»¥é€šè¿‡å®ƒæ¥ç›´æ¥è¿è¡Œã€‚

ä½†æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸€äº›ä»£ç ï¼Œå¦‚æœåœ¨ CLI ä¸­æ‰§è¡Œ =doom sync= ä¹‹ç±»çš„æ“ä½œï¼Œå¤§é‡çš„
ä»£ç å—è¾“å‡ºä¼šç›´æ¥æ±¡æŸ“è¾“å‡ºã€‚è¿™ä¸èƒ½å¿ï¼

å¥½åœ¨ DOOM æä¾›äº†æ¯æ¬¡è¿è¡Œ CLI å‰è¯»å– =$DOOMDIR/cli.el= çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†æ‰‹åŠ¨
ç¡®è®¤æ˜¯å¦è¿è¡ŒæŸä¸ªä»£ç å— (~org-confirm-babel-evaluate~)ï¼Œå¹¶ä¸”ç”¨
~org-babel-execute-src-block~ æ¥æ²‰é»˜è¿™äº›ä»£ç å—ï¼Œé¿å…æ±¡æŸ“è¾“å‡ºã€‚

#+begin_src emacs-lisp :tangle cli.el :comments no
;;; cli.el -*- lexical-binding: t; -*-
(setq! org-confirm-babel-evaluate nil)
(advice-add 'org-babel-execute-src-block
            :around #'(lambda (orig-fn &rest args)
                        (quiet! (apply orig-fn args))))
#+end_src

*** dashboard

Dashboard æ˜¯æ‰“å¼€ Emacs çš„ä¸»é¡µï¼Œå±•ç¤ºå‘½ä»¤å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œç§»é™¤æ‰å®ƒä»¬ï¼
#+name: doom-dashboard-layout
#+begin_src emacs-lisp :tangle no
(remove-hook! '+doom-dashboard-functions #'doom-dashboard-widget-shortmenu)
(add-hook! +doom-dashboard-mode (hide-mode-line-mode 1) (hl-line-mode 1))
#+end_src

** å…¶ä»–è®¾ç½®

*** çª—å£æ ‡é¢˜

æˆ‘æ›´å–œæ¬¢çª—å£å±•ç¤ºç¼“å†²åŒºçš„åå­—ï¼Œç„¶åæ˜¯é¡¹ç›®æ–‡ä»¶å¤¹ (å¦‚æœå¯ç”¨)ã€‚
#+begin_src emacs-lisp
(setq! frame-title-format
      '("%b â€“ Doom Emacs"
        (:eval
         (let ((project-name (projectile-project-name)))
           (unless (string= "-" project-name)
             (format "  -  [%s]" project-name))))))
#+end_src

*** å¯åŠ¨ç•Œé¢

[[https://github.com/tecosaur][tecosaur]] åšäº†ä¸€ä¸ªç›¸å½“æ£’çš„å¯åŠ¨ç”»é¢ï¼Œå¿ƒåŠ¨ï¼ä½†æ˜¯å¤ªå¤æ‚äº†ã€‚æˆ‘åªæ˜¯æƒ³ç®€å•çš„åœ¨æ¯æ¬¡é‡å¯æ—¶
æ›´æ¢ bannerï¼Œä»…æ­¤è€Œå·²ã€‚

#+name: doom-image-banner
#+begin_src emacs-lisp :tangle no
(setq! fancy-splash-image
       (let ((banners (directory-files (expand-file-name "banners" doom-user-dir)
                                       'full (rx ".png" eos))))
         (elt banners (random (length banners)))))
#+end_src

å½“ç„¶ï¼Œä¸è¦å¿˜è®° ASCII banner
#+name: doom-ascii-banner
#+begin_src emacs-lisp :tangle no
(setq! ginshio/+doom-dashbord-ascii-banner
       (split-string (with-output-to-string
                       (call-process "cat" nil standard-output nil
                                     (let ((banners (directory-files (expand-file-name "banners" doom-user-dir)
                                                                     'full (rx ".txt" eos))))
                                       (elt banners (random (length banners))))))
                     "\n" t))
(setq! +doom-dashboard-ascii-banner-fn
       #'(lambda ()
           (mapc (lambda (line)
                   (insert (propertize (+doom-dashboard--center +doom-dashboard--width line)
                                       'face 'doom-dashboard-banner) " ")
                   (insert "\n"))
                 ginshio/+doom-dashbord-ascii-banner)))
#+end_src
