# https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port
# https://docs.gitlab.com/ee/user/gitlab_com
# https://garbers.co.za/2014/03/03/connecting-to-bitbucket-on-https-port
{%@@ for key, val in ssh.items() @@%}

Host {{@@ val.remote @@}}
    Hostname {{@@ val.hostname @@}}
    User git
    Port {{@@ val.port @@}}
    PreferredAuthentications publickey
    IdentitiesOnly yes
{%@@ if profile == "personal" @@%}
    IdentityFile {{@@ _dotfile_abs_dst @@}}/{{@@ profile @@}}-git
{%@@ else @@%}
    IdentityFile {{@@ _dotfile_abs_dst @@}}/{{@@ profile @@}}-pub-git
{%@@ endif @@%}
    ControlMaster auto
    ControlPath {{@@ env['HOME'] @@}}/.ssh/cm-%C:%n
    ControlPersist 30m
{%@@ endfor @@%}
