# ==========================================
# Aria2 Basic Configuration
# ==========================================

# --- Basic Settings ---
# Download directory (modify according to your actual situation, e.g., ~/Downloads)
dir=${HOME}/Downloads
# Resume downloading
continue=true
# Log file path
log={{@@ sysenv.xdg_config_home @@}}/aria2/aria2.log
# Log level (debug, info, notice, warn, error)
log-level=warn

# --- Core Download Optimization (Key to Speed) ---
# Maximum number of concurrent downloads (Default: 5)
max-concurrent-downloads=5
# Maximum number of connections to one server for each download (Default: 1, Max: 16)
# This is the most critical setting for improving single-file download speed, max it out
max-connection-per-server=16
# Maximum number of split threads/connections per file (Default: 5)
split=16
# Minimum file split size (Default: 20M)
# Files smaller than this size will not be split
min-split-size=5M
# Dynamically adjust the number of parallel downloads based on bandwidth
optimize-concurrent-downloads=true

# --- Disk I/O Optimization ---
# Disk cache (Default: 16M)
# Increasing cache significantly reduces disk I/O, extends HDD life, and prevents download speed drops
disk-cache=64M
# File pre-allocation method (none, prealloc, trunc, falloc)
# Modern Linux file systems (ext4, btrfs, xfs) strongly recommend falloc, instant allocation without fragmentation
file-allocation=falloc
# Do not pre-allocate space for files smaller than this size
no-file-allocation-limit=5M

# --- HTTP/FTP Settings ---
# Spoof User-Agent to prevent some websites from blocking aria2's default identifier
user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
# Disable IPv6 (If your network environment has unstable IPv6 causing downloads to stall, set to true)
disable-ipv6=true
# Enable asynchronous DNS
async-dns=false
# Connection timeout (seconds)
connect-timeout=60
# Read timeout (seconds)
timeout=60
# Maximum number of retries
max-tries=5
# Retry wait time (seconds)
retry-wait=10

# --- Progress Saving ---
# Read download tasks from session file
input={{@@ sysenv.xdg_config_home @@}}/aria2/aria2.session
# Save error/incomplete download tasks to session file when Aria2 exits
save-session={{@@ sysenv.xdg_config_home @@}}/aria2/aria2.session
# Save session periodically (seconds) to prevent progress loss on unexpected crashes
save-session-interval=60

# --- RPC Settings (Highly recommended for use with GUI) ---
# Enable RPC, allowing external control
enable-rpc=true
# Allow all origins
rpc-allow-origin-all=true
# Listen on all network interfaces
rpc-listen-all=true
# RPC listen port
rpc-listen-port=10001
# RPC authorization token (For security, MUST be changed to your own password)
rpc-secret={{@@ aria2.rpc_token @@}}
